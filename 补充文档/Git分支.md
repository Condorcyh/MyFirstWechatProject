# Git分支

这个笔记聊一聊Git分支。特别是在团队协作开发项目的时候，Git分支显得尤为重要



## 1. 什么是分支？

分支，英文名是Branch，简单理解为一个开发过程中的副本，而创建副本的目的就是避免影响开发主线。

通俗一点讲，Git分支就相当于漫威中的主宇宙和平行宇宙，这些之间互不干扰，当主宇宙的超级英雄去到各个平行宇宙取无限宝石回来后，某个意义上将这些分支就进行了一次合并，将宝石归还回去后，这些分支又分离开来，各自工作。



## 2.  示例

开发一个商城项目

![Git分支示例.PNG](https://i.loli.net/2020/05/15/KSTsocMud2q4bi8.png)

如图，某一个团队决定开发一个商城项目，开发前规划好了一些待开发的模块。如果一个模块一个模块地做的话，很浪费时间并且没有效率，所以，负责开发不同模块的开发人员可以创建各自属于自己的分支，大家一起工作互不干扰，当最后都开发完成后，大家再把左右的分支合并成为一个完整的项目



## 3.  分支细分

### 3.1 主分支（master）

第一次向git仓库提交更新记录时自动产生的一个分支

master主分支应该**非常稳定**，用来发布新版本，一般情况下**不允许在上面工作**，工作一般情况下在新建的分支上工作，工作完后，比如说要发布，或者说分支代码稳定后，可以合并到主分支master上来



### 3.2 开发分支（develop）

作为开发的分支，**基于master分支**创建



### 3.3 功能分支（feature）

作为开发具体功能的分支，**基于开发分支**创建





## 4. 分支命令

- ` git branch ` 查看分支
  - 注意：当前分支前面有个标记“ * ”
- ` git branch 分支名称 ` 创建分支
- ` git checkout 分支名称 ` 切换分支
  - 对于新分支，可以使用`git checkout -b 分支名` 指令来切换分支，-b表示创建并切换，相当于是两个操作指令
- ` git merge 被合并的分支名称 ` 合并分支
- ` git branch -d 要删除的分支名称 ` 删除分支（分支合并后才允许被删除）（-D 大写强制删除）
  - 在删除分支的时候，一定要先退出要删除的分支（和电脑删除文件一个道理，不可能在这个文件打开的同时把它删除）
  - `git push origin :branch-name` : 远程仓库同步删除掉的分支



## 5. 冲突的产生和解决

产生：本地版本和线上版本不一致，即多人开发同一个项目时，两个人修改了同一个文件的同一个地方



解决：

1. git pull

   ![20191115164339.png](https://i.loli.net/2020/05/15/3M7AbcpYkG5lKIX.png)

   <<<<<<<HEAD到\=\=\=\=\=\=\=之间，是本地的修改

   \=\=\=\=\=\=\=到>>>>>>>cf5e·····，是线上的冲突

2. 这时需要手动解决冲突（删除or保留）

3. git push



冲突的解决比较麻烦，所以大家还是要提前沟通好尽量避免冲突